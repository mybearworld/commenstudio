(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ge,b,En,ve,Ht,An,Et,Tn,Ae={},Rn=[],cr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vt=Array.isArray;function ae(t,e){for(var n in e)t[n]=e[n];return t}function Cn(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t,e,n){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Ge.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Ie(t,o,r,i,null)}function Ie(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++En};return i==null&&b.vnode!=null&&b.vnode(s),s}function ur(){return{current:null}}function G(t){return t.children}function se(t,e){this.props=t,this.context=e}function Ze(t,e){if(e==null)return t.__?Ze(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__d||n.__e;return typeof t.type=="function"?Ze(t):null}function On(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return On(t)}}function At(t){(!t.__d&&(t.__d=!0)&&ve.push(t)&&!it.__r++||Ht!==b.debounceRendering)&&((Ht=b.debounceRendering)||An)(it)}function it(){var t,e,n,r,i,s,o,a,c;for(ve.sort(Et);t=ve.shift();)t.__d&&(e=ve.length,r=void 0,i=void 0,s=void 0,a=(o=(n=t).__v).__e,(c=n.__P)&&(r=[],i=[],(s=ae({},o)).__v=o.__v+1,Zt(c,o,s,n.__n,c.ownerSVGElement!==void 0,o.__h!=null?[a]:null,r,a??Ze(o),o.__h,i),Mn(r,o,i),o.__e!=a&&On(o)),ve.length>e&&ve.sort(Et));it.__r=0}function Nn(t,e,n,r,i,s,o,a,c,l,f){var u,D,k,p,R,F,I,L,U,H=0,j=r&&r.__k||Rn,X=j.length,K=X,d=e.length;for(n.__k=[],u=0;u<d;u++)(p=n.__k[u]=(p=e[u])==null||typeof p=="boolean"||typeof p=="function"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?Ie(null,p,null,null,p):vt(p)?Ie(G,{children:p},null,null,null):p.__b>0?Ie(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null?(p.__=n,p.__b=n.__b+1,(L=lr(p,j,I=u+H,K))===-1?k=Ae:(k=j[L]||Ae,j[L]=void 0,K--),Zt(t,p,k,i,s,o,a,c,l,f),R=p.__e,(D=p.ref)&&k.ref!=D&&(k.ref&&Lt(k.ref,null,p),f.push(D,p.__c||R,p)),R!=null&&(F==null&&(F=R),(U=k===Ae||k.__v===null)?L==-1&&H--:L!==I&&(L===I+1?H++:L>I?K>d-I?H+=L-I:H--:H=L<I&&L==I-1?L-I:0),I=u+H,typeof p.type!="function"||L===I&&k.__k!==p.__k?typeof p.type=="function"||L===I&&!U?p.__d!==void 0?(c=p.__d,p.__d=void 0):c=R.nextSibling:c=Dn(t,R,c):c=Pn(p,c,t),typeof n.type=="function"&&(n.__d=c))):(k=j[u])&&k.key==null&&k.__e&&(k.__e==c&&(k.__=r,c=Ze(k)),Tt(k,k,!1),j[u]=null);for(n.__e=F,u=X;u--;)j[u]!=null&&(typeof n.type=="function"&&j[u].__e!=null&&j[u].__e==n.__d&&(n.__d=j[u].__e.nextSibling),Tt(j[u],j[u]))}function Pn(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?Pn(r,e,n):Dn(n,r.__e,e));return e}function ce(t,e){return e=e||[],t==null||typeof t=="boolean"||(vt(t)?t.some(function(n){ce(n,e)}):e.push(t)),e}function Dn(t,e,n){return n==null||n.parentNode!==t?t.insertBefore(e,null):e==n&&e.parentNode!=null||t.insertBefore(e,n),e.nextSibling}function lr(t,e,n,r){var i=t.key,s=t.type,o=n-1,a=n+1,c=e[n];if(c===null||c&&i==c.key&&s===c.type)return n;if(r>(c!=null?1:0))for(;o>=0||a<e.length;){if(o>=0){if((c=e[o])&&i==c.key&&s===c.type)return o;o--}if(a<e.length){if((c=e[a])&&i==c.key&&s===c.type)return a;a++}}return-1}function dr(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||ot(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||ot(t,s,e[s],n[s],r)}function Wt(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||cr.test(e)?n:n+"px"}function ot(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Wt(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Wt(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,s?Jt:qt,s)):t.removeEventListener(e,s?Jt:qt,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function qt(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(b.event?b.event(t):t)}function Jt(t){return this.l[t.type+!0](b.event?b.event(t):t)}function Zt(t,e,n,r,i,s,o,a,c,l){var f,u,D,k,p,R,F,I,L,U,H,j,X,K,d,h=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,a=e.__e=n.__e,e.__h=null,s=[a]),(f=b.__b)&&f(e);e:if(typeof h=="function")try{if(I=e.props,L=(f=h.contextType)&&r[f.__c],U=f?L?L.props.value:f.__:r,n.__c?F=(u=e.__c=n.__c).__=u.__E:("prototype"in h&&h.prototype.render?e.__c=u=new h(I,U):(e.__c=u=new se(I,U),u.constructor=h,u.render=_r),L&&L.sub(u),u.props=I,u.state||(u.state={}),u.context=U,u.__n=r,D=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),h.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=ae({},u.__s)),ae(u.__s,h.getDerivedStateFromProps(I,u.__s))),k=u.props,p=u.state,u.__v=e,D)h.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(h.getDerivedStateFromProps==null&&I!==k&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(I,U),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(I,u.__s,U)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(u.props=I,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(g){g&&(g.__=e)}),H=0;H<u._sb.length;H++)u.__h.push(u._sb[H]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(I,u.__s,U),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(k,p,R)})}if(u.context=U,u.props=I,u.__P=t,u.__e=!1,j=b.__r,X=0,"prototype"in h&&h.prototype.render){for(u.state=u.__s,u.__d=!1,j&&j(e),f=u.render(u.props,u.state,u.context),K=0;K<u._sb.length;K++)u.__h.push(u._sb[K]);u._sb=[]}else do u.__d=!1,j&&j(e),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++X<25);u.state=u.__s,u.getChildContext!=null&&(r=ae(ae({},r),u.getChildContext())),D||u.getSnapshotBeforeUpdate==null||(R=u.getSnapshotBeforeUpdate(k,p)),Nn(t,vt(d=f!=null&&f.type===G&&f.key==null?f.props.children:f)?d:[d],e,n,r,i,s,o,a,c,l),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),F&&(u.__E=u.__=null)}catch(g){e.__v=null,(c||s!=null)&&(e.__e=a,e.__h=!!c,s[s.indexOf(a)]=null),b.__e(g,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=fr(n.__e,e,n,r,i,s,o,c,l);(f=b.diffed)&&f(e)}function Mn(t,e,n){for(var r=0;r<n.length;r++)Lt(n[r],n[++r],n[++r]);b.__c&&b.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){b.__e(s,i.__v)}})}function fr(t,e,n,r,i,s,o,a,c){var l,f,u,D=n.props,k=e.props,p=e.type,R=0;if(p==="svg"&&(i=!0),s!=null){for(;R<s.length;R++)if((l=s[R])&&"setAttribute"in l==!!p&&(p?l.localName===p:l.nodeType===3)){t=l,s[R]=null;break}}if(t==null){if(p===null)return document.createTextNode(k);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,k.is&&k),s=null,a=!1}if(p===null)D===k||a&&t.data===k||(t.data=k);else{if(s=s&&Ge.call(t.childNodes),f=(D=n.props||Ae).dangerouslySetInnerHTML,u=k.dangerouslySetInnerHTML,!a){if(s!=null)for(D={},R=0;R<t.attributes.length;R++)D[t.attributes[R].name]=t.attributes[R].value;(u||f)&&(u&&(f&&u.__html==f.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(dr(t,k,D,i,a),u)e.__k=[];else if(Nn(t,vt(R=e.props.children)?R:[R],e,n,r,i&&p!=="foreignObject",s,o,s?s[0]:n.__k&&Ze(n,0),a,c),s!=null)for(R=s.length;R--;)s[R]!=null&&Cn(s[R]);a||("value"in k&&(R=k.value)!==void 0&&(R!==t.value||p==="progress"&&!R||p==="option"&&R!==D.value)&&ot(t,"value",R,D.value,!1),"checked"in k&&(R=k.checked)!==void 0&&R!==t.checked&&ot(t,"checked",R,D.checked,!1))}return t}function Lt(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){b.__e(r,n)}}function Tt(t,e,n){var r,i;if(b.unmount&&b.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Lt(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){b.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Tt(r[i],e,n||typeof t.type!="function");n||t.__e==null||Cn(t.__e),t.__=t.__e=t.__d=void 0}function _r(t,e,n){return this.constructor(t,n)}function Re(t,e,n){var r,i,s,o;b.__&&b.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,s=[],o=[],Zt(e,t=(!r&&n||e).__k=le(G,null,[t]),i||Ae,Ae,e.ownerSVGElement!==void 0,!r&&n?[n]:i?null:e.firstChild?Ge.call(e.childNodes):null,s,!r&&n?n:i?i.__e:e.firstChild,r,o),Mn(s,t,o)}function In(t,e){Re(t,e,In)}function hr(t,e,n){var r,i,s,o,a=ae({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s]===void 0&&o!==void 0?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?Ge.call(arguments,2):n),Ie(t.type,a,r||t.key,i||t.ref,null)}function Zn(t,e){var n={__c:e="__cC"+Tn++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(a){a.__e=!0,At(a)})},this.sub=function(o){i.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),a&&a.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}Ge=Rn.slice,b={__e:function(t,e,n,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},En=0,se.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ae({},this.state),typeof t=="function"&&(t=t(ae({},n),this.props)),t&&ae(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),At(this))},se.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),At(this))},se.prototype.render=G,ve=[],An=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Et=function(t,e){return t.__v.__b-e.__v.__b},it.__r=0,Tn=0;var _e,$,xt,Ft,Ce=0,Ln=[],tt=[],Gt=b.__b,Yt=b.__r,Qt=b.diffed,Xt=b.__c,Kt=b.unmount;function Pe(t,e){b.__h&&b.__h($,t,Ce||e),Ce=0;var n=$.__H||($.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:tt}),n.__[t]}function ye(t){return Ce=1,jt($n,t)}function jt(t,e,n){var r=Pe(_e++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):$n(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,a);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=$,!$.u)){var i=function(a,c,l){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(D){return D.__c});if(f.every(function(D){return!D.__N}))return!s||s.call(this,a,c,l);var u=!1;return f.forEach(function(D){if(D.__N){var k=D.__[0];D.__=D.__N,D.__N=void 0,k!==D.__[0]&&(u=!0)}}),!(!u&&r.__c.props===a)&&(!s||s.call(this,a,c,l))};$.u=!0;var s=$.shouldComponentUpdate,o=$.componentWillUpdate;$.componentWillUpdate=function(a,c,l){if(this.__e){var f=s;s=void 0,i(a,c,l),s=f}o&&o.call(this,a,c,l)},$.shouldComponentUpdate=i}return r.__N||r.__}function be(t,e){var n=Pe(_e++,3);!b.__s&&Vt(n.__H,e)&&(n.__=t,n.i=e,$.__H.__h.push(n))}function yt(t,e){var n=Pe(_e++,4);!b.__s&&Vt(n.__H,e)&&(n.__=t,n.i=e,$.__h.push(n))}function Ye(t){return Ce=5,Ut(function(){return{current:t}},[])}function pr(t,e,n){Ce=6,yt(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},n==null?n:n.concat(t))}function Ut(t,e){var n=Pe(_e++,7);return Vt(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function jn(t,e){return Ce=8,Ut(function(){return t},e)}function Un(t){var e=$.context[t.__c],n=Pe(_e++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub($)),e.props.value):t.__}function Vn(t,e){b.useDebugValue&&b.useDebugValue(e?e(t):t)}function mr(){var t=Pe(_e++,11);if(!t.__){for(var e=$.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function vr(){for(var t;t=Ln.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(nt),t.__H.__h.forEach(Rt),t.__H.__h=[]}catch(e){t.__H.__h=[],b.__e(e,t.__v)}}b.__b=function(t){$=null,Gt&&Gt(t)},b.__r=function(t){Yt&&Yt(t),_e=0;var e=($=t.__c).__H;e&&(xt===$?(e.__h=[],$.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=tt,n.__N=n.i=void 0})):(e.__h.forEach(nt),e.__h.forEach(Rt),e.__h=[],_e=0)),xt=$},b.diffed=function(t){Qt&&Qt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ln.push(e)!==1&&Ft===b.requestAnimationFrame||((Ft=b.requestAnimationFrame)||yr)(vr)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==tt&&(n.__=n.__V),n.i=void 0,n.__V=tt})),xt=$=null},b.__c=function(t,e){e.some(function(n){try{n.__h.forEach(nt),n.__h=n.__h.filter(function(r){return!r.__||Rt(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],b.__e(r,n.__v)}}),Xt&&Xt(t,e)},b.unmount=function(t){Kt&&Kt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{nt(r)}catch(i){e=i}}),n.__H=void 0,e&&b.__e(e,n.__v))};var en=typeof requestAnimationFrame=="function";function yr(t){var e,n=function(){clearTimeout(r),en&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);en&&(e=requestAnimationFrame(n))}function nt(t){var e=$,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),$=e}function Rt(t){var e=$;t.__c=t.__(),$=e}function Vt(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function $n(t,e){return typeof e=="function"?e(t):e}let gr=0;function Ct(t,e){const n=`atom${++gr}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=i=>i(r),r.write=(i,s,o)=>s(r,typeof o=="function"?o(i(r)):o)),e&&(r.write=e),r}const tn=t=>"init"in t,nn=t=>!!t.write,at=new WeakMap,br=(t,e)=>{at.set(t,e),t.catch(()=>{}).finally(()=>at.delete(t))},rn=(t,e)=>{const n=at.get(t);n&&(at.delete(t),n(e))},sn=(t,e)=>{t.status="fulfilled",t.value=e},on=(t,e)=>{t.status="rejected",t.reason=e},xr=t=>typeof(t==null?void 0:t.then)=="function",Ke=(t,e)=>"v"in t&&"v"in e&&Object.is(t.v,e.v),an=(t,e)=>"e"in t&&"e"in e&&Object.is(t.e,e.e),De=t=>"v"in t&&t.v instanceof Promise,wr=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,et=t=>{if("e"in t)throw t.e;return t.v},kr=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;const s=d=>t.get(d),o=(d,h)=>{const g=t.get(d);if(t.set(d,h),n.has(d)||n.set(d,g),g&&De(g)){const y="v"in h?h.v instanceof Promise?h.v:Promise.resolve(h.v):Promise.reject(h.e);g.v!==y&&rn(g.v,y)}},a=(d,h,g)=>{const y=new Map;let A=!1;g.forEach((T,S)=>{!T&&S===d&&(T=h),T&&(y.set(S,T),h.d.get(S)!==T&&(A=!0))}),(A||h.d.size!==y.size)&&(h.d=y)},c=(d,h,g)=>{const y=s(d),A={d:(y==null?void 0:y.d)||new Map,v:h};if(g&&a(d,A,g),y&&Ke(y,A)&&y.d===A.d)return y;if(y&&De(y)&&De(A)&&wr(y,A)){if(y.d===A.d)return y;A.v=y.v}return o(d,A),A},l=(d,h,g,y)=>{if(xr(h)){let A;const T=new Promise((S,M)=>{let z=!1;h.then(P=>{if(!z){z=!0;const V=s(d),W=c(d,T,g);sn(T,P),S(P),e.has(d)&&(V==null?void 0:V.d)!==W.d&&j(d,W,V==null?void 0:V.d)}},P=>{if(!z){z=!0;const V=s(d),W=c(d,T,g);on(T,P),M(P),e.has(d)&&(V==null?void 0:V.d)!==W.d&&j(d,W,V==null?void 0:V.d)}}),A=P=>{z||(z=!0,P.then(V=>sn(T,V),V=>on(T,V)),S(P))}});return T.orig=h,T.status="pending",br(T,S=>{S&&A(S),y==null||y()}),c(d,T,g)}return c(d,h,g)},f=(d,h,g)=>{const y=s(d),A={d:(y==null?void 0:y.d)||new Map,e:h};return g&&a(d,A,g),y&&an(y,A)&&y.d===A.d?y:(o(d,A),A)},u=(d,h)=>{const g=s(d);if(!h&&g&&(e.has(d)||Array.from(g.d).every(([P,V])=>P===d||u(P)===V)))return g;const y=new Map;let A=!0;const T=P=>{if(P===d){const W=s(P);if(W)return y.set(P,W),et(W);if(tn(P))return y.set(P,void 0),P.init;throw new Error("no atom init")}const V=u(P);return y.set(P,V),et(V)};let S,M;const z={get signal(){return S||(S=new AbortController),S.signal},get setSelf(){return!M&&nn(d)&&(M=(...P)=>{if(!A)return L(d,...P)}),M}};try{const P=d.read(T,z);return l(d,P,y,()=>S==null?void 0:S.abort())}catch(P){return f(d,P,y)}finally{A=!1}},D=d=>et(u(d)),k=d=>{let h=e.get(d);return h||(h=U(d)),h},p=(d,h)=>!h.l.size&&(!h.t.size||h.t.size===1&&h.t.has(d)),R=d=>{const h=e.get(d);h&&p(d,h)&&H(d)},F=d=>{const h=new Map,g=new WeakMap,y=S=>{var M;const z=new Set((M=e.get(S))==null?void 0:M.t);return n.forEach((P,V)=>{var W;(W=s(V))!=null&&W.d.has(S)&&z.add(V)}),z},A=S=>{y(S).forEach(M=>{M!==S&&(h.set(M,(h.get(M)||new Set).add(S)),g.set(M,(g.get(M)||0)+1),A(M))})};A(d);const T=S=>{y(S).forEach(M=>{var z;if(M!==S){let P=g.get(M);if(P&&g.set(M,--P),!P){let V=!!((z=h.get(M))!=null&&z.size);if(V){const W=s(M),ar=u(M,!0);V=!W||!Ke(W,ar)}V||h.forEach(W=>W.delete(M))}T(M)}})};T(d)},I=(d,...h)=>{let g=!0;const y=S=>et(u(S)),A=(S,...M)=>{let z;if(S===d){if(!tn(S))throw new Error("atom not writable");const P=s(S),V=l(S,M[0]);(!P||!Ke(P,V))&&F(S)}else z=I(S,...M);if(!g){const P=X()}return z},T=d.write(y,A,...h);return g=!1,T},L=(d,...h)=>{const g=I(d,...h),y=X();return g},U=(d,h,g)=>{var y;const A=g||[];(y=s(d))==null||y.d.forEach((S,M)=>{const z=e.get(M);z?z.t.add(d):M!==d&&U(M,d,A)}),u(d);const T={t:new Set(h&&[h]),l:new Set};if(e.set(d,T),nn(d)&&d.onMount){const{onMount:S}=d;A.push(()=>{const M=S((...z)=>L(d,...z));M&&(T.u=M)})}return g||A.forEach(S=>S()),T},H=d=>{var h;const g=(h=e.get(d))==null?void 0:h.u;g&&g(),e.delete(d);const y=s(d);y&&(De(y)&&rn(y.v),y.d.forEach((A,T)=>{if(T!==d){const S=e.get(T);S&&(S.t.delete(d),p(T,S)&&H(T))}}))},j=(d,h,g)=>{const y=new Set(h.d.keys());g==null||g.forEach((A,T)=>{if(y.has(T)){y.delete(T);return}const S=e.get(T);S&&(S.t.delete(d),p(T,S)&&H(T))}),y.forEach(A=>{const T=e.get(A);T?T.t.add(d):e.has(d)&&U(A,d)})},X=()=>{let d;for(;n.size;){const h=Array.from(n);n.clear(),h.forEach(([g,y])=>{const A=s(g);if(A){const T=e.get(g);T&&A.d!==(y==null?void 0:y.d)&&j(g,A,y==null?void 0:y.d),T&&!(y&&!De(y)&&(Ke(y,A)||an(y,A)))&&T.l.forEach(S=>S())}})}};return{get:D,set:L,sub:(d,h)=>{const g=k(d),y=X(),A=g.l;return A.add(h),()=>{A.delete(h),R(d)}}}};let wt;const Sr=()=>(wt||(wt=kr()),wt);function Bn(t,e){for(var n in e)t[n]=e[n];return t}function Ot(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function kt(t,e){return t===e&&(t!==0||1/t==1/e)||t!=t&&e!=e}function Nt(t){this.props=t}function Er(t,e){function n(i){var s=this.props.ref,o=s==i.ref;return!o&&s&&(s.call?s(null):s.current=null),e?!e(this.props,i)||!o:Ot(this.props,i)}function r(i){return this.shouldComponentUpdate=n,le(t,i)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Nt.prototype=new se).isPureReactComponent=!0,Nt.prototype.shouldComponentUpdate=function(t,e){return Ot(this.props,t)||Ot(this.state,e)};var cn=b.__b;b.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),cn&&cn(t)};var Ar=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Tr(t){function e(n){var r=Bn({},n);return delete r.ref,t(r,n.ref||null)}return e.$$typeof=Ar,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var un=function(t,e){return t==null?null:ce(ce(t).map(e))},Rr={map:un,forEach:un,count:function(t){return t?ce(t).length:0},only:function(t){var e=ce(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:ce},Cr=b.__e;b.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}Cr(t,e,n,r)};var ln=b.unmount;function zn(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Bn({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return zn(r,e,n)})),t}function Hn(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return Hn(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function rt(){this.__u=0,this.t=null,this.__b=null}function Wn(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Or(t){var e,n,r;function i(s){if(e||(e=t()).then(function(o){n=o.default||o},function(o){r=o}),r)throw r;if(!n)throw e;return le(n,s)}return i.displayName="Lazy",i.__f=!0,i}function Me(){this.u=null,this.o=null}b.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),ln&&ln(t)},(rt.prototype=new se).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=Wn(r.__v),s=!1,o=function(){s||(s=!0,n.__R=null,i?i(a):a())};n.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Hn(l,l.__c.__P,l.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.t.pop();)f.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},rt.prototype.componentWillUnmount=function(){this.t=[]},rt.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=zn(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&le(G,null,t.fallback);return i&&(i.__h=null),[le(G,null,e.__a?null:t.children),i]};var dn=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function Nr(t){return this.getChildContext=function(){return t.context},t.children}function Pr(t){var e=this,n=t.i;e.componentWillUnmount=function(){Re(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Re(le(Nr,{context:e.context},t.__v),e.l)}function Dr(t,e){var n=le(Pr,{__v:t,i:e});return n.containerInfo=e,n}(Me.prototype=new se).__a=function(t){var e=this,n=Wn(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),dn(e,t,r)):i()};n?n(s):s()}},Me.prototype.render=function(t){this.u=null,this.o=new Map;var e=ce(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Me.prototype.componentDidUpdate=Me.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){dn(t,n,e)})};var qn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Mr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ir=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Zr=/[A-Z0-9]/g,Lr=typeof document<"u",jr=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Ur(t,e,n){return e.__k==null&&(e.textContent=""),Re(t,e),typeof n=="function"&&n(),t?t.__c:null}function Vr(t,e,n){return In(t,e),typeof n=="function"&&n(),t?t.__c:null}se.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(se.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var fn=b.event;function $r(){}function Br(){return this.cancelBubble}function zr(){return this.defaultPrevented}b.event=function(t){return fn&&(t=fn(t)),t.persist=$r,t.isPropagationStopped=Br,t.isDefaultPrevented=zr,t.nativeEvent=t};var $t,Hr={enumerable:!1,configurable:!0,get:function(){return this.class}},_n=b.vnode;b.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,i={};for(var s in n){var o=n[s];if(!(s==="value"&&"defaultValue"in n&&o==null||Lr&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var a=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&o===!0?o="":a==="ondoubleclick"?s="ondblclick":a!=="onchange"||r!=="input"&&r!=="textarea"||jr(n.type)?a==="onfocus"?s="onfocusin":a==="onblur"?s="onfocusout":Ir.test(s)?s=a:r.indexOf("-")===-1&&Mr.test(s)?s=s.replace(Zr,"-$&").toLowerCase():o===null&&(o=void 0):a=s="oninput",a==="oninput"&&i[s=a]&&(s="oninputCapture"),i[s]=o}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ce(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=ce(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",Hr)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i}(t),t.$$typeof=qn,_n&&_n(t)};var hn=b.__r;b.__r=function(t){hn&&hn(t),$t=t.__c};var pn=b.diffed;b.diffed=function(t){pn&&pn(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),$t=null};var Wr={ReactCurrentDispatcher:{current:{readContext:function(t){return $t.__n[t.__c].props.value}}}};function qr(t){return le.bind(null,t)}function gt(t){return!!t&&t.$$typeof===qn}function Jr(t){return gt(t)&&t.type===G}function Fr(t){return gt(t)?hr.apply(null,arguments):t}function Gr(t){return!!t.__k&&(Re(null,t),!0)}function Yr(t){return t&&(t.base||t.nodeType===1&&t)||null}var Qr=function(t,e){return t(e)},Xr=function(t,e){return t(e)},Kr=G;function Jn(t){t()}function es(t){return t}function ts(){return[!1,Jn]}var ns=yt,rs=gt;function ss(t,e){var n=e(),r=ye({h:{__:n,v:e}}),i=r[0].h,s=r[1];return yt(function(){i.__=n,i.v=e,kt(i.__,e())||s({h:i})},[t,n,e]),be(function(){return kt(i.__,i.v())||s({h:i}),t(function(){kt(i.__,i.v())||s({h:i})})},[t]),n}var is={useState:ye,useId:mr,useReducer:jt,useEffect:be,useLayoutEffect:yt,useInsertionEffect:ns,useTransition:ts,useDeferredValue:es,useSyncExternalStore:ss,startTransition:Jn,useRef:Ye,useImperativeHandle:pr,useMemo:Ut,useCallback:jn,useContext:Un,useDebugValue:Vn,version:"17.0.2",Children:Rr,render:Ur,hydrate:Vr,unmountComponentAtNode:Gr,createPortal:Dr,createElement:le,createContext:Zn,createFactory:qr,cloneElement:Fr,createRef:ur,Fragment:G,isValidElement:gt,isElement:rs,isFragment:Jr,findDOMNode:Yr,Component:se,PureComponent:Nt,memo:Er,forwardRef:Tr,flushSync:Xr,unstable_batchedUpdates:Qr,StrictMode:Kr,Suspense:rt,SuspenseList:Me,lazy:Or,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wr};const os=Zn(void 0),Fn=t=>{const e=Un(os);return(t==null?void 0:t.store)||e||Sr()},as=t=>typeof(t==null?void 0:t.then)=="function",cs=is.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function us(t,e){const n=Fn(e),[[r,i,s],o]=jt(l=>{const f=n.get(t);return Object.is(l[0],f)&&l[1]===n&&l[2]===t?l:[f,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const c=e==null?void 0:e.delay;return be(()=>{const l=n.sub(t,()=>{if(typeof c=="number"){setTimeout(o,c);return}o()});return o(),l},[n,t,c]),Vn(a),as(a)?cs(a):a}function ls(t,e){const n=Fn(e);return jn((...i)=>n.set(t,...i),[n,t])}function Q(t,e){return[us(t,e),ls(t,e)]}const ds=Symbol(),fs=t=>typeof(t==null?void 0:t.then)=="function";function _s(t){let e,n;const r={getItem:(i,s)=>{var o,a;const c=f=>{if(f=f||"",e!==f){try{n=JSON.parse(f)}catch{return s}e=f}return n},l=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return fs(l)?l.then(c):c(l)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=c=>{if(c.storageArea===t()&&c.key===i){let l;try{l=JSON.parse(c.newValue||"")}catch{l=o}s(l)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const hs=_s(()=>typeof window<"u"?window.localStorage:void 0);function Qe(t,e,n=hs,r){const i=r==null?void 0:r.unstable_getOnInit,s=Ct(i?n.getItem(t,e):e);return s.onMount=a=>{i||a(n.getItem(t,e));let c;return n.subscribe&&(c=n.subscribe(t,a,e)),c},Ct(a=>a(s),(a,c,l)=>{const f=typeof l=="function"?l(a(s)):l;return f===ds?(c(s,e),n.removeItem(t)):f instanceof Promise?f.then(u=>(c(s,u),n.setItem(t,u))):(c(s,f),n.setItem(t,f))})}const Gn=Ct(!1),Bt=Qe("commenstudio:studios",[]),Yn=Qe("commenstudio:readTo",0),Qn=Qe("commenstudio:pinnedComments",[]),ps=Qe("commenstudio:pinReasons",{}),Xn=Qe("commenstudio:hideRead",!1),zt=t=>fetch(`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(t)}`),mn=async t=>(await zt(`https://api.scratch.mit.edu/studios/${t}`)).status===200;var ms=0;function x(t,e,n,r,i,s){var o,a,c={};for(a in e)a=="ref"?o=e[a]:c[a]=e[a];var l={type:t,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ms,__source:i,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return b.vnode&&b.vnode(l),l}function vs(){const[t,e]=Q(Bt),n=()=>{const r=[...t];r.push(1234),e(r)};return x("div",{class:"flex flex-col items-end gap-2",children:[x("h2",{class:"text-xl font-bold",children:["Studios: ",t.length]}),t.length>0?x("ul",{class:"contents",children:t.map((r,i)=>x("li",{class:"flex w-full",children:x(ys,{studio:r,index:i})},i))}):null,x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:n,children:"New"})]})}function ys({studio:t,index:e}){const[n,r]=Q(Bt),[i,s]=ye(!1),o=Ye(null);be(()=>{(async()=>o.current&&(await mn(Number(o.current.value))||s(!0)))()});const a=async()=>{if(!o.current)return;const l=o.current.value,f=Number(l);l.toString()!==l&&(o.current.value=n[e].toString()),await mn(f)||s(!0),r([...n.slice(0,e),f,...n.slice(e+1)]),i&&s(!1)},c=()=>{r([...n.slice(0,e),...n.slice(e+1)])};return x("div",{class:"w-full",children:x("div",{class:"flex w-full justify-between",children:[x("input",{class:`w-32 rounded-xl bg-stone-300 px-2 py-1 ${i?"ring ring-red-400 focus-visible:outline-red-700":""}`,type:"number",value:t,onChange:l=>a(),ref:o}),x("button",{onClick:()=>c(),type:"button",class:"font-bold text-sky-600 hover:underline",children:"Delete"})]})})}var Z;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Z||(Z={}));var Pt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Pt||(Pt={}));const m=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fe=t=>{switch(typeof t){case"undefined":return m.undefined;case"string":return m.string;case"number":return isNaN(t)?m.nan:m.number;case"boolean":return m.boolean;case"function":return m.function;case"bigint":return m.bigint;case"symbol":return m.symbol;case"object":return Array.isArray(t)?m.array:t===null?m.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?m.promise:typeof Map<"u"&&t instanceof Map?m.map:typeof Set<"u"&&t instanceof Set?m.set:typeof Date<"u"&&t instanceof Date?m.date:m.object;default:return m.unknown}},_=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),gs=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class te extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}te.create=t=>new te(t);const Le=(t,e)=>{let n;switch(t.code){case _.invalid_type:t.received===m.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case _.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Z.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:n=`Unrecognized key(s) in object: ${Z.joinValues(t.keys,", ")}`;break;case _.invalid_union:n="Invalid input";break;case _.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Z.joinValues(t.options)}`;break;case _.invalid_enum_value:n=`Invalid enum value. Expected ${Z.joinValues(t.options)}, received '${t.received}'`;break;case _.invalid_arguments:n="Invalid function arguments";break;case _.invalid_return_type:n="Invalid function return type";break;case _.invalid_date:n="Invalid date";break;case _.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Z.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case _.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case _.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case _.custom:n="Invalid input";break;case _.invalid_intersection_types:n="Intersection results could not be merged";break;case _.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case _.not_finite:n="Number must be finite";break;default:n=e.defaultError,Z.assertNever(t)}return{message:n}};let Kn=Le;function bs(t){Kn=t}function ct(){return Kn}const ut=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},xs=[];function v(t,e){const n=ut({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ct(),Le].filter(r=>!!r)});t.common.issues.push(n)}class q{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return C;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return q.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return C;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const C=Object.freeze({status:"aborted"}),er=t=>({status:"dirty",value:t}),J=t=>({status:"valid",value:t}),Dt=t=>t.status==="aborted",Mt=t=>t.status==="dirty",je=t=>t.status==="valid",lt=t=>typeof Promise<"u"&&t instanceof Promise;var w;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(w||(w={}));class ie{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vn=(t,e)=>{if(je(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new te(t.common.issues);return this._error=n,this._error}}};function O(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class N{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return fe(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:fe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(lt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fe(e)},s=this._parseSync({data:e,path:i.path,parent:i});return vn(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fe(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(lt(i)?i:Promise.resolve(i));return vn(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:_.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new re({schema:this,typeName:E.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ue.create(this,this._def)}nullable(){return ke.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ne.create(this,this._def)}promise(){return Ne.create(this,this._def)}or(e){return Be.create([this,e],this._def)}and(e){return ze.create(this,e,this._def)}transform(e){return new re({...O(this._def),schema:this,typeName:E.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Fe({...O(this._def),innerType:this,defaultValue:n,typeName:E.ZodDefault})}brand(){return new nr({typeName:E.ZodBranded,type:this,...O(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ht({...O(this._def),innerType:this,catchValue:n,typeName:E.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Xe.create(this,e)}readonly(){return mt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ws=/^c[^\s-]{8,}$/i,ks=/^[a-z][a-z0-9]*$/,Ss=/^[0-9A-HJKMNP-TV-Z]{26}$/,Es=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,As=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ts="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let St;const Rs=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Cs=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Os=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Ns(t,e){return!!((e==="v4"||!e)&&Rs.test(t)||(e==="v6"||!e)&&Cs.test(t))}class ee extends N{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==m.string){const s=this._getOrReturnCtx(e);return v(s,{code:_.invalid_type,expected:m.string,received:s.parsedType}),C}const r=new q;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:_.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:_.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?v(i,{code:_.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&v(i,{code:_.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")As.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"email",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")St||(St=new RegExp(Ts,"u")),St.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"emoji",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Es.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"uuid",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")ws.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"cuid",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")ks.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"cuid2",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Ss.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"ulid",code:_.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),v(i,{validation:"url",code:_.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"regex",code:_.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),v(i,{code:_.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),v(i,{code:_.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),v(i,{code:_.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Os(s).test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{code:_.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?Ns(e.data,s.version)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"ip",code:_.invalid_string,message:s.message}),r.dirty()):Z.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:_.invalid_string,...w.errToObj(r)})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...w.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...w.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...w.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...w.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...w.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...w.errToObj(n)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new ee({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ee({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ee.create=t=>{var e;return new ee({checks:[],typeName:E.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...O(t)})};function Ps(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class he extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==m.number){const s=this._getOrReturnCtx(e);return v(s,{code:_.invalid_type,expected:m.number,received:s.parsedType}),C}let r;const i=new q;for(const s of this._def.checks)s.kind==="int"?Z.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:_.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Ps(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:_.not_finite,message:s.message}),i.dirty()):Z.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,w.toString(n))}gt(e,n){return this.setLimit("min",e,!1,w.toString(n))}lte(e,n){return this.setLimit("max",e,!0,w.toString(n))}lt(e,n){return this.setLimit("max",e,!1,w.toString(n))}setLimit(e,n,r,i){return new he({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:w.toString(i)}]})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Z.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}he.create=t=>new he({checks:[],typeName:E.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...O(t)});class pe extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==m.bigint){const s=this._getOrReturnCtx(e);return v(s,{code:_.invalid_type,expected:m.bigint,received:s.parsedType}),C}let r;const i=new q;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),v(r,{code:_.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Z.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,w.toString(n))}gt(e,n){return this.setLimit("min",e,!1,w.toString(n))}lte(e,n){return this.setLimit("max",e,!0,w.toString(n))}lt(e,n){return this.setLimit("max",e,!1,w.toString(n))}setLimit(e,n,r,i){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:w.toString(i)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pe.create=t=>{var e;return new pe({checks:[],typeName:E.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...O(t)})};class Ue extends N{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==m.boolean){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.boolean,received:r.parsedType}),C}return J(e.data)}}Ue.create=t=>new Ue({typeName:E.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...O(t)});class xe extends N{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==m.date){const s=this._getOrReturnCtx(e);return v(s,{code:_.invalid_type,expected:m.date,received:s.parsedType}),C}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return v(s,{code:_.invalid_date}),C}const r=new q;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:_.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:_.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Z.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xe({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}xe.create=t=>new xe({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:E.ZodDate,...O(t)});class dt extends N{_parse(e){if(this._getType(e)!==m.symbol){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.symbol,received:r.parsedType}),C}return J(e.data)}}dt.create=t=>new dt({typeName:E.ZodSymbol,...O(t)});class Ve extends N{_parse(e){if(this._getType(e)!==m.undefined){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.undefined,received:r.parsedType}),C}return J(e.data)}}Ve.create=t=>new Ve({typeName:E.ZodUndefined,...O(t)});class $e extends N{_parse(e){if(this._getType(e)!==m.null){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.null,received:r.parsedType}),C}return J(e.data)}}$e.create=t=>new $e({typeName:E.ZodNull,...O(t)});class Oe extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return J(e.data)}}Oe.create=t=>new Oe({typeName:E.ZodAny,...O(t)});class ge extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return J(e.data)}}ge.create=t=>new ge({typeName:E.ZodUnknown,...O(t)});class de extends N{_parse(e){const n=this._getOrReturnCtx(e);return v(n,{code:_.invalid_type,expected:m.never,received:n.parsedType}),C}}de.create=t=>new de({typeName:E.ZodNever,...O(t)});class ft extends N{_parse(e){if(this._getType(e)!==m.undefined){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.void,received:r.parsedType}),C}return J(e.data)}}ft.create=t=>new ft({typeName:E.ZodVoid,...O(t)});class ne extends N{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==m.array)return v(n,{code:_.invalid_type,expected:m.array,received:n.parsedType}),C;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(v(n,{code:o?_.too_big:_.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(v(n,{code:_.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(v(n,{code:_.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ie(n,o,n.path,a)))).then(o=>q.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ie(n,o,n.path,a)));return q.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new ne({...this._def,minLength:{value:e,message:w.toString(n)}})}max(e,n){return new ne({...this._def,maxLength:{value:e,message:w.toString(n)}})}length(e,n){return new ne({...this._def,exactLength:{value:e,message:w.toString(n)}})}nonempty(e){return this.min(1,e)}}ne.create=(t,e)=>new ne({type:t,minLength:null,maxLength:null,exactLength:null,typeName:E.ZodArray,...O(e)});function Ee(t){if(t instanceof B){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ue.create(Ee(r))}return new B({...t._def,shape:()=>e})}else return t instanceof ne?new ne({...t._def,type:Ee(t.element)}):t instanceof ue?ue.create(Ee(t.unwrap())):t instanceof ke?ke.create(Ee(t.unwrap())):t instanceof oe?oe.create(t.items.map(e=>Ee(e))):t}class B extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Z.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==m.object){const l=this._getOrReturnCtx(e);return v(l,{code:_.invalid_type,expected:m.object,received:l.parsedType}),C}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof de&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const f=s[l],u=i.data[l];c.push({key:{status:"valid",value:l},value:f._parse(new ie(i,u,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof de){const l=this._def.unknownKeys;if(l==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(l==="strict")a.length>0&&(v(i,{code:_.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const f of a){const u=i.data[f];c.push({key:{status:"valid",value:f},value:l._parse(new ie(i,u,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const f of c){const u=await f.key;l.push({key:u,value:await f.value,alwaysSet:f.alwaysSet})}return l}).then(l=>q.mergeObjectSync(r,l)):q.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new B({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=w.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new B({...this._def,unknownKeys:"strip"})}passthrough(){return new B({...this._def,unknownKeys:"passthrough"})}extend(e){return new B({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new B({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:E.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new B({...this._def,catchall:e})}pick(e){const n={};return Z.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new B({...this._def,shape:()=>n})}omit(e){const n={};return Z.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new B({...this._def,shape:()=>n})}deepPartial(){return Ee(this)}partial(e){const n={};return Z.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new B({...this._def,shape:()=>n})}required(e){const n={};return Z.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ue;)s=s._def.innerType;n[r]=s}}),new B({...this._def,shape:()=>n})}keyof(){return tr(Z.objectKeys(this.shape))}}B.create=(t,e)=>new B({shape:()=>t,unknownKeys:"strip",catchall:de.create(),typeName:E.ZodObject,...O(e)});B.strictCreate=(t,e)=>new B({shape:()=>t,unknownKeys:"strict",catchall:de.create(),typeName:E.ZodObject,...O(e)});B.lazycreate=(t,e)=>new B({shape:t,unknownKeys:"strip",catchall:de.create(),typeName:E.ZodObject,...O(e)});class Be extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new te(a.ctx.common.issues));return v(n,{code:_.invalid_union,unionErrors:o}),C}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new te(c));return v(n,{code:_.invalid_union,unionErrors:a}),C}}get options(){return this._def.options}}Be.create=(t,e)=>new Be({options:t,typeName:E.ZodUnion,...O(e)});const st=t=>t instanceof We?st(t.schema):t instanceof re?st(t.innerType()):t instanceof qe?[t.value]:t instanceof me?t.options:t instanceof Je?Object.keys(t.enum):t instanceof Fe?st(t._def.innerType):t instanceof Ve?[void 0]:t instanceof $e?[null]:null;class bt extends N{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.object)return v(n,{code:_.invalid_type,expected:m.object,received:n.parsedType}),C;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(v(n,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),C)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=st(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new bt({typeName:E.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...O(r)})}}function It(t,e){const n=fe(t),r=fe(e);if(t===e)return{valid:!0,data:t};if(n===m.object&&r===m.object){const i=Z.objectKeys(e),s=Z.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=It(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===m.array&&r===m.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=It(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===m.date&&r===m.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ze extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Dt(s)||Dt(o))return C;const a=It(s.value,o.value);return a.valid?((Mt(s)||Mt(o))&&n.dirty(),{status:n.value,value:a.data}):(v(r,{code:_.invalid_intersection_types}),C)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ze.create=(t,e,n)=>new ze({left:t,right:e,typeName:E.ZodIntersection,...O(n)});class oe extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.array)return v(r,{code:_.invalid_type,expected:m.array,received:r.parsedType}),C;if(r.data.length<this._def.items.length)return v(r,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),C;!this._def.rest&&r.data.length>this._def.items.length&&(v(r,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ie(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>q.mergeArray(n,o)):q.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new oe({...this._def,rest:e})}}oe.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oe({items:t,typeName:E.ZodTuple,rest:null,...O(e)})};class He extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.object)return v(r,{code:_.invalid_type,expected:m.object,received:r.parsedType}),C;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new ie(r,a,r.path,a)),value:o._parse(new ie(r,r.data[a],r.path,a))});return r.common.async?q.mergeObjectAsync(n,i):q.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof N?new He({keyType:e,valueType:n,typeName:E.ZodRecord,...O(r)}):new He({keyType:ee.create(),valueType:e,typeName:E.ZodRecord,...O(n)})}}class _t extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.map)return v(r,{code:_.invalid_type,expected:m.map,received:r.parsedType}),C;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:i._parse(new ie(r,a,r.path,[l,"key"])),value:s._parse(new ie(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,f=await c.value;if(l.status==="aborted"||f.status==="aborted")return C;(l.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(l.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,f=c.value;if(l.status==="aborted"||f.status==="aborted")return C;(l.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(l.value,f.value)}return{status:n.value,value:a}}}}_t.create=(t,e,n)=>new _t({valueType:e,keyType:t,typeName:E.ZodMap,...O(n)});class we extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==m.set)return v(r,{code:_.invalid_type,expected:m.set,received:r.parsedType}),C;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(v(r,{code:_.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(v(r,{code:_.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const f of c){if(f.status==="aborted")return C;f.status==="dirty"&&n.dirty(),l.add(f.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>s._parse(new ie(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new we({...this._def,minSize:{value:e,message:w.toString(n)}})}max(e,n){return new we({...this._def,maxSize:{value:e,message:w.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}we.create=(t,e)=>new we({valueType:t,minSize:null,maxSize:null,typeName:E.ZodSet,...O(e)});class Te extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.function)return v(n,{code:_.invalid_type,expected:m.function,received:n.parsedType}),C;function r(a,c){return ut({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ct(),Le].filter(l=>!!l),issueData:{code:_.invalid_arguments,argumentsError:c}})}function i(a,c){return ut({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ct(),Le].filter(l=>!!l),issueData:{code:_.invalid_return_type,returnTypeError:c}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ne){const a=this;return J(async function(...c){const l=new te([]),f=await a._def.args.parseAsync(c,s).catch(k=>{throw l.addIssue(r(c,k)),l}),u=await Reflect.apply(o,this,f);return await a._def.returns._def.type.parseAsync(u,s).catch(k=>{throw l.addIssue(i(u,k)),l})})}else{const a=this;return J(function(...c){const l=a._def.args.safeParse(c,s);if(!l.success)throw new te([r(c,l.error)]);const f=Reflect.apply(o,this,l.data),u=a._def.returns.safeParse(f,s);if(!u.success)throw new te([i(f,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Te({...this._def,args:oe.create(e).rest(ge.create())})}returns(e){return new Te({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Te({args:e||oe.create([]).rest(ge.create()),returns:n||ge.create(),typeName:E.ZodFunction,...O(r)})}}class We extends N{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}We.create=(t,e)=>new We({getter:t,typeName:E.ZodLazy,...O(e)});class qe extends N{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return v(n,{received:n.data,code:_.invalid_literal,expected:this._def.value}),C}return{status:"valid",value:e.data}}get value(){return this._def.value}}qe.create=(t,e)=>new qe({value:t,typeName:E.ZodLiteral,...O(e)});function tr(t,e){return new me({values:t,typeName:E.ZodEnum,...O(e)})}class me extends N{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return v(n,{expected:Z.joinValues(r),received:n.parsedType,code:_.invalid_type}),C}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return v(n,{received:n.data,code:_.invalid_enum_value,options:r}),C}return J(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return me.create(e)}exclude(e){return me.create(this.options.filter(n=>!e.includes(n)))}}me.create=tr;class Je extends N{_parse(e){const n=Z.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==m.string&&r.parsedType!==m.number){const i=Z.objectValues(n);return v(r,{expected:Z.joinValues(i),received:r.parsedType,code:_.invalid_type}),C}if(n.indexOf(e.data)===-1){const i=Z.objectValues(n);return v(r,{received:r.data,code:_.invalid_enum_value,options:i}),C}return J(e.data)}get enum(){return this._def.values}}Je.create=(t,e)=>new Je({values:t,typeName:E.ZodNativeEnum,...O(e)});class Ne extends N{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==m.promise&&n.common.async===!1)return v(n,{code:_.invalid_type,expected:m.promise,received:n.parsedType}),C;const r=n.parsedType===m.promise?n.data:Promise.resolve(n.data);return J(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ne.create=(t,e)=>new Ne({type:t,typeName:E.ZodPromise,...O(e)});class re extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===E.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{v(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?C:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?C:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!je(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>je(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Z.assertNever(i)}}re.create=(t,e,n)=>new re({schema:t,typeName:E.ZodEffects,effect:e,...O(n)});re.createWithPreprocess=(t,e,n)=>new re({schema:e,effect:{type:"preprocess",transform:t},typeName:E.ZodEffects,...O(n)});class ue extends N{_parse(e){return this._getType(e)===m.undefined?J(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ue.create=(t,e)=>new ue({innerType:t,typeName:E.ZodOptional,...O(e)});class ke extends N{_parse(e){return this._getType(e)===m.null?J(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ke.create=(t,e)=>new ke({innerType:t,typeName:E.ZodNullable,...O(e)});class Fe extends N{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===m.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Fe.create=(t,e)=>new Fe({innerType:t,typeName:E.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...O(e)});class ht extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lt(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new te(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new te(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ht.create=(t,e)=>new ht({innerType:t,typeName:E.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...O(e)});class pt extends N{_parse(e){if(this._getType(e)!==m.nan){const r=this._getOrReturnCtx(e);return v(r,{code:_.invalid_type,expected:m.nan,received:r.parsedType}),C}return{status:"valid",value:e.data}}}pt.create=t=>new pt({typeName:E.ZodNaN,...O(t)});const Ds=Symbol("zod_brand");class nr extends N{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Xe extends N{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?C:s.status==="dirty"?(n.dirty(),er(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?C:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Xe({in:e,out:n,typeName:E.ZodPipeline})}}class mt extends N{_parse(e){const n=this._def.innerType._parse(e);return je(n)&&(n.value=Object.freeze(n.value)),n}}mt.create=(t,e)=>new mt({innerType:t,typeName:E.ZodReadonly,...O(e)});const rr=(t,e={},n)=>t?Oe.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):Oe.create(),Ms={object:B.lazycreate};var E;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(E||(E={}));const Is=(t,e={message:`Input not instance of ${t.name}`})=>rr(n=>n instanceof t,e),sr=ee.create,ir=he.create,Zs=pt.create,Ls=pe.create,or=Ue.create,js=xe.create,Us=dt.create,Vs=Ve.create,$s=$e.create,Bs=Oe.create,zs=ge.create,Hs=de.create,Ws=ft.create,qs=ne.create,Js=B.create,Fs=B.strictCreate,Gs=Be.create,Ys=bt.create,Qs=ze.create,Xs=oe.create,Ks=He.create,ei=_t.create,ti=we.create,ni=Te.create,ri=We.create,si=qe.create,ii=me.create,oi=Je.create,ai=Ne.create,yn=re.create,ci=ue.create,ui=ke.create,li=re.createWithPreprocess,di=Xe.create,fi=()=>sr().optional(),_i=()=>ir().optional(),hi=()=>or().optional(),pi={string:t=>ee.create({...t,coerce:!0}),number:t=>he.create({...t,coerce:!0}),boolean:t=>Ue.create({...t,coerce:!0}),bigint:t=>pe.create({...t,coerce:!0}),date:t=>xe.create({...t,coerce:!0})},mi=C;var Y=Object.freeze({__proto__:null,defaultErrorMap:Le,setErrorMap:bs,getErrorMap:ct,makeIssue:ut,EMPTY_PATH:xs,addIssueToContext:v,ParseStatus:q,INVALID:C,DIRTY:er,OK:J,isAborted:Dt,isDirty:Mt,isValid:je,isAsync:lt,get util(){return Z},get objectUtil(){return Pt},ZodParsedType:m,getParsedType:fe,ZodType:N,ZodString:ee,ZodNumber:he,ZodBigInt:pe,ZodBoolean:Ue,ZodDate:xe,ZodSymbol:dt,ZodUndefined:Ve,ZodNull:$e,ZodAny:Oe,ZodUnknown:ge,ZodNever:de,ZodVoid:ft,ZodArray:ne,ZodObject:B,ZodUnion:Be,ZodDiscriminatedUnion:bt,ZodIntersection:ze,ZodTuple:oe,ZodRecord:He,ZodMap:_t,ZodSet:we,ZodFunction:Te,ZodLazy:We,ZodLiteral:qe,ZodEnum:me,ZodNativeEnum:Je,ZodPromise:Ne,ZodEffects:re,ZodTransformer:re,ZodOptional:ue,ZodNullable:ke,ZodDefault:Fe,ZodCatch:ht,ZodNaN:pt,BRAND:Ds,ZodBranded:nr,ZodPipeline:Xe,ZodReadonly:mt,custom:rr,Schema:N,ZodSchema:N,late:Ms,get ZodFirstPartyTypeKind(){return E},coerce:pi,any:Bs,array:qs,bigint:Ls,boolean:or,date:js,discriminatedUnion:Ys,effect:yn,enum:ii,function:ni,instanceof:Is,intersection:Qs,lazy:ri,literal:si,map:ei,nan:Zs,nativeEnum:oi,never:Hs,null:$s,nullable:ui,number:ir,object:Js,oboolean:hi,onumber:_i,optional:ci,ostring:fi,pipeline:di,preprocess:li,promise:ai,record:Ks,set:ti,strictObject:Fs,string:sr,symbol:Us,transformer:yn,tuple:Xs,undefined:Vs,union:Gs,unknown:zs,void:Ws,NEVER:mi,ZodIssueCode:_,quotelessJson:gs,ZodError:te});const vi=Y.object({id:Y.number(),content:Y.string(),datetime_created:Y.string().datetime(),author:Y.object({id:Y.number(),username:Y.string(),scratchteam:Y.boolean(),image:Y.string().url()}),reply_count:Y.number()}),gn=async(t,e=0)=>{const n=await Promise.all([...new Set(t)].map(async i=>{const s=await(await zt(`https://api.scratch.mit.edu/studios/${i}/comments?limit=40&offset=${40*e}`)).json(),o=vi.array().safeParse(s);return o.success?o.data.map(a=>({...a,studio:i})):[]}));let r=[];return r=r.concat(...n).sort((i,s)=>{const o=new Date(i.datetime_created).getTime(),a=new Date(s.datetime_created).getTime();return o<a?1:o>a?-1:0}),r},yi={meow:"",gobo:"[gobo]",cat:"","aww-cat":"","cool-cat":"","tongue-out-cat":"","wink-cat":"","lol-cat":"","upside-down-cat":"","huh-cat":"","love-it-cat":"","fav-it-cat":"[star cat]","rainbow-cat":"[rainbow cat]","pizza-cat":"[pizza cat]","10mil":"",waffle:"",taco:"",sushi:"",apple:"",broccoli:"",pizza:"",candycorn:"",map:"",camera:"",suitcase:"",compass:"",binoculars:"[binoculars]",cupcake:"",pride:"",blm:""},gi=t=>(Object.entries(yi).forEach(([e,n])=>{t=t.replace(new RegExp(`<img src="/images/emoji/${e}.png" class="emoji" alt="(.*?)">`,"g"),n)}),t.replace(/<img src="\/images\/emoji\/meow.png" class="emoji" alt="(.*?)">/,"").replace(/<img src="\/images\/emoji\/gobo.png" class="emoji" alt="(.*?)">/,"[gobo]").replace(/<img src="\/images\/emoji\/cat.png" class="emoji" alt="(.*?)">/,"").replace(/<img src="\/images\/emoji\/aww-cat.png" class="emoji" alt="(.*?)">/,"").replace(/<img src="\/images\/emoji\/cool-cat.png" class="emoji" alt="(.*?)">/,"")),bn=new Map,bi=Y.object({title:Y.string()}),xi=async t=>{const e=new Map;for(const n of t){const r=bn.get(n);if(r){e.set(n,r);continue}const i=await(await zt(`https://api.scratch.mit.edu/studios/${n}`)).json(),s=bi.parse(i);bn.set(n,s.title),e.set(n,s.title)}return e},Se=new Intl.RelativeTimeFormat("en"),wi=1e3,xn=60,wn=60,kn=24,ki=12,Si=t=>{const e=new Date,r=(t.getTime()-e.getTime())/wi,i=r/xn,s=i/wn,o=s/kn;if(Math.abs(r)<xn)return Se.format(Math.trunc(r),"seconds");if(Math.abs(i)<wn)return Se.format(Math.trunc(i),"minutes");if(Math.abs(s)<kn)return Se.format(Math.trunc(s),"hours");let a=t.getFullYear()-e.getFullYear(),c=t.getMonth()-e.getMonth()+ki*a;return c>0&&t.getDate()<e.getDate()&&c--,c<0&&t.getDate()>e.getDate()&&c++,Math.abs(c)<1?Se.format(Math.trunc(o),"days"):(a>0&&(t.getMonth()<e.getMonth()||t.getMonth()===e.getMonth()&&t.getDate()<e.getDate())&&a--,a<0&&(t.getMonth()>e.getMonth()||t.getMonth()===e.getMonth()&&t.getDate()>e.getDate())&&a++,Math.abs(a)<1?Se.format(c,"months"):Se.format(a,"years"))},Ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAYAAABroNZJAAACUUlEQVQ4y6WUTUhUURiGn3Eax7mU5HDFscGbC7UpcuEtpR9JEJuGohg3LsaNi4qIsKgWiZgrqUAKJSgYglyMSBAziygdihiI/nFRRBO5qAsW6jRTqXcE09NCumL3mkrf5pzzwXnOd97vPQcs4tyRcsEaIscqKRcWEGlXxX9BahvPoBTN0nNi+5oqMkXPqV1i+vEeEb4QMEBDAzdENHxF/LOSSFeTsUkNtJJKzxLc951Lx+sFQOrTa/QvCdOB65aspHKCVY+AgNA+vkMunEfx5hE6MIlc3CKk2TcgJk0Qm9GRgx6hbN2Nv0rDVyahjc6gePNMG4bfTkJFFzvqDtlMlaj1Tfi3vUR2SwCWAABfmURs+Km1Js3ne22xwYkVBZdcdnTt3vLCyqU1q+pccL+LSHersITo3z6sCiK7HUhTcXMlke5WEWz4Swf7epDKluacHnB6qK3ZyB/PGJDks7vEBie4fP0zyREdAG3+MCfPJtAyJQYj9sLHxavjyMUlPLk/sNidntMNwl+dQfE66Y+OoXidCyI6svjUvUi5i95QNsukvpbCr3HUiinCnS3CFrnWLmqVOLLbQX90jFBjEZLLbtJBz84Z3TH8AiRHpskh9QDZ7aC3L4O/zm0JAIgn0sQTaQMYf56LNjqzcJ3Uj1x6+zK03X5vkz0BEXL/tASplRuQXHaSIzrxVwW03XpoM9neeL3HSsXR0CbiiTR6ds4A6tk5yK+iuf2ObcX/RPHm0T+Uj6ZXo1YujLLbgVS00xJgGeHOFsOJHU1bjHn0ZseyH9RvnLfMpX3tEzMAAAAASUVORK5CYII=",Ai="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAASCAYAAACuLnWgAAADWklEQVQ4y6VVX2hbVRz+ElJLA8q1DNYuqTn4oi0bSenDKnPtRWxnHTFJGfiywb2l6tNoL7MvMumNteBEaJggWKQ3tUHQikShsNWHG7qXdC9JVFIoaG6wL2VKctUN42o+H7S3tomS6Q8OHO75zu+7v+/35wD/wxRF4ezsLP/LXcqyzFYIgoG2lrCeZh8vPvEVrO1OTs28Dk3TXADw9z8uFAr4/btV3J7vwvGXN/DAJLIs49LZbxEeqOOl918DAL4w0IH61wkH0/NrHcHedgDAUG871KsfMRaLuR4oko2tGoZ627GqHcPKrbsID3RA8robcO/e+BnVe3XEYjEYhkFVVZsSNdwcHh529uUf9lAo38erqSo2tmqHcIXyfaS+EYi/dwOhUAiqqsIwDLZEYtu243Bk/g4eP/cGxrUUZtZOYOXW3QPcvTqi0ShkWYZpmgiFQtA0rbXSkrxu7i76uJ3opizL3LdKpUIhBLcT3aylerid6KYQgiRZKpW4sLBAAGwWjedoWT7d/gUkrxuS1w3LsgAAlmVB0zRMTU1hZUPH1fFHEDjmQfjJH6GqKqrVKoQQTuU1yKUoisOcTqcRHuhwDs8+dgeJxEFVSZLk5OPNz36C5HUj/cmHsCwL+Xwe09PTCAaD0HW9MTeGYTAajTIYaGMt1eOs3UUfg4E2KopCXdcpSRLN9c8Zef4ZPtTmYVfnoxRCMJfL0TRNR1rTNCmEoCzLjfIdJdnb+oAkaRgGJycn+fa1a05+dF13nDSzUqlE0zQJAK79TrZtG8nF69hd9P2p4/Gn4Hn244Nol5aQXFrCzs4OTg8OYmR0FH19fTg9ONigTD6fx/LyMqrVKpLJpMt1NPEn99K4/NzDDSTX/8qNMjGBzWwWm9ksisUiNrNZ+P1++Px+qBMTGBkdBQAkk0kAQNMGFSc6eXu+i7VUD+u/fO+E/+nqKs+PjdG27UOy2LbN82Njh84qlQoTicS/D05JkvjORYm/rZ0jawdOZ65c4dCZM5yLx7l+8ybn4nGGTp3iXDzuYHK5XAPBPw61aDTKUm4Nl8M+xF55C50nXwQAbBWL+HJ93cGNX7gAv9+PTCaDQqGAQCCAo8PS1cq7kclk9okRiUScBi2XyxBCwLIsRCIR9Pf3N/X3B6UQAyT2WO36AAAAAElFTkSuQmCC",Ti="/commenstudio/assets/pin-227d1b1d.svg",Ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAPCAYAAAARZmTlAAAD2UlEQVQ4y4WUbUhbZxTHf4lXc2+WaHJ9y4u2uqS6trHqZmSjQ2WU2W0fFtg6JgxWx2Afhgzml0IL28BPhXYfpIWV0X0sGytVGBuhUFy2DpwtUUydbZMpNdG1xrwY440x9u7DXVI61+4PD8/Dw3nO/5zzP8/R8RQkZ75TC9lVMmsrpJNJCirsbXaxsRbDVO2kvKoBa/s7Ov4HjxksTlxQy3fSbG6kiYZDJJfDvPjaAD9f+YZ8PIxtj5u2/kEuj57EIMCR94aJhCMIemhwe9j35sh/EgrFw9T5Y6pRv0Eunye1uoxRr1DX3k02q6DPxjAIYGvxsnhrikoRquudiGaZpeB5jDoFJRnjzuVhVSdIu8h0ANc+61Ltnl5mA+MAWB0uqqwyTQe85DIJRLNcevDXnyGUpFauHb3E3E/nAOh+e5iZyQDr0RAH+gbwfnixRKT75axPlWtkZq770W/ESs729w2wvgXTVy9hEMDT48PqcLF4J0R9jUzDfi+FvIJQIZX2YgCpBzEa23rJZeI8/9G3Ov39WT+1TR5EUSpFLJpl7K1eFm74qTVBpajVPBwMkJ7zE4+FyWUSjJ07yfdffko8GiEejRCLxRBNMs3tvdQ0uLC5DjH51XG1pEnXq++WSAp5hUJeobVdK1cRK7c1PZzuNuZvBqgUQdBDTYOLX8e15ljKP9Li5bc+Jr34O8JKQmHl9hSb2xC8OoK7zYunx8fNgJ8qq4y9pRtTjQOhQsL3yVlSyxEsDhdbikLZlgfRLFPYUkgth6kUtayLsNQ5WCrkESyHfMxfH+OlY8MYXx9AMsvMTAZI3w2QBqKSzJHjpxi/MIIoSRzs6oFykew22A/2YqnTAjj6wSlymSSZtRiFvIJokhEqJJRMgrIrgfkvOmyFz3WpCE2dr2CqcRKcGMewk0Gvg2c7e0is51AWf6NsO0PrYR+3Jq+xFvJzLxyitbufH74eYeVehEw6wTbluDt7qKrfyx8TlxBq27R/Yuv0MR0cI7t+hucO+3jj/WFymQRLswHsLV5uXBsDwFTtRDBIJW3cHi/xaARVSWC2SNidHuytXgBm/ReZC4UYGp/SlXr59GCHGl+YprEKGu0yzS/0U9vsKbXoRnwZ0WylkFeIhkMYBLC3eMluKlRZtdIUA4vOT7HwQOHEj9o/3DUGThy1qA9zKexmkI1g2+PG4nBhtbu1bP5pgiLxdl4TPbkc4f5KjNUsrG7AmcAj308cbqcHO9TY3WmeqQBjBYgCVBoetyk8hM1tyOa1tVUAd2cfQ6MTuicOyKdhdKhPBQgHJ0p3zn0dSCbLLqf/xt9dB50WCfxmLAAAAABJRU5ErkJggg==",Ci=1e3,Oi=60;function Ni(){const[t]=Q(Bt),[e]=Q(Qn),[n]=Q(Gn),[r,i]=ye([]),[s,o]=ye(0),[a,c]=ye(new Map),[l,f]=ye(null),u=Ye(null);be(()=>{l&&clearInterval(l),f(setInterval(async()=>{var L;if(s!==0||!n)return;const p=await gn(t,s);if(!(p[0].id!==r[0].id))return;const F=((L=p.map((U,H)=>({...U,index:H})).find(U=>r[0].id===U.id))==null?void 0:L.index)??0,I=p.slice(0,F);console.log(p,r,I),I.forEach(U=>{u.current&&(u.current.innerHTML=gi(U.content),new Notification(`New comment from ${a.get(U.studio)}`,{body:`${U.author.username}: "${u.current.textContent}"`,icon:U.author.image}))}),i(p)},1.5*Oi*Ci))},[t,r,s,n,a]),be(()=>{(async()=>(i(await gn(t,s)),c(await xi(new Set(t)))))()},[t,s]);const D=()=>{o(p=>p-1)},k=()=>{o(p=>p+1)};return x("div",{class:"flex flex-col gap-2",children:[x("span",{class:"hidden",ref:u}),x("h2",{class:"text-xl font-bold",children:["Comments (",s===0?x(G,{children:""}):x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:D,children:""})," ",s+1," ",r.length===0?x(G,{children:""}):x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:k,children:""}),")"]}),e.length===0?null:x("div",{class:"mb-4 space-y-2",children:[" ",e.map((p,R)=>x(Sn,{...p},R))]}),r.length===0?x("p",{class:"w-full text-lg italic",children:t.length===0?"Add some studio IDs on the left! The comments from them will appear over here.":s===0?"There are no comments here.":"No comments left."}):r.map((p,R)=>x(Sn,{...p,studioName:a.get(p.studio)??"",showIfPinned:!1},R))]})}function Sn({id:t,content:e,datetime_created:n,author:r,reply_count:i,studio:s,studioName:o,showIfPinned:a=!0}){const[c]=Q(Xn),[l,f]=Q(Yn),[u,D]=Q(ps),[k,p]=Q(Qn),R=Ye(null),F=`https://scratch.mit.edu/users/${r.username}`,I=e.replace(/<img src="\/images\/emoji\/meow.png"/g,`<img src="${Ai}"`).replace(/<img src="\/images\/emoji\/gobo.png"/g,`<img src="${Ei}"`).replace(/<img src="\/images\/emoji\/waffle.png"/g,`<img src="${Ri}"`).replace(/<img src="\/images\/emoji/g,'<img src="https://scratch.mit.edu/images/emoji').replace(/<img/g,'<img class="inline-block max-w-[24px]"'),L=new Date(n),U=L.getTime()<=l,H=k.find(h=>h.id===t),j=!!H;if(j&&!a||U&&c)return null;const X=()=>{f(L.getTime())},K=()=>{if(j){const h=k.indexOf(H);p([...k.slice(0,h),...k.slice(h+1)])}else{const h=[...k];h.push({id:t,content:e,datetime_created:n,author:r,reply_count:i,studio:s,studioName:o}),p(h)}},d=()=>{if(!R.current)return;const h=R.current.value,g={...u};g[t.toString()]=h,console.log(g),D(g)};return x("div",{class:`flex w-full items-center gap-2 rounded-xl bg-stone-300 px-2 py-1 ${U&&!j?"opacity-80":""}`,children:[x("a",{href:F,children:x("img",{class:"h-12 min-h-[theme(spacing.12)] w-12 min-w-[theme(spacing.12)]",src:r.image,alt:`${r.username}'s profile picture`})}),x("div",{children:[x("span",{class:"flex items-center gap-2",children:[j?x("img",{class:"inline-block h-4 w-4",src:Ti,title:"Pinned",alt:"Pin emoji"}):null,x("a",{href:F,class:"font-bold text-sky-600 hover:underline",children:r.username}),x("span",{class:"italic",children:o})]}),x("p",{dangerouslySetInnerHTML:{__html:I},style:{overflowWrap:"anywhere"}}),x("a",{class:"font-bold text-sky-600 hover:underline",target:"_blank",href:`https://scratch.mit.edu/studios/${s}/comments/#comments-${t}`,children:["reply (",i,"/25)"]})," ","-"," ",x("span",{title:L.toISOString(),children:Si(L)})," ","-"," ",U?"Read":x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:X,children:"Mark as read"})," ","-"," ",x("button",{class:"font-bold text-sky-600 hover:underline",onClick:K,children:j?"Unpin":"Pin"}),j?x("input",{class:"ml-2 rounded-xl bg-stone-200 px-2 py-1",placeholder:"Pin reason",onChange:d,value:u[t]??"",ref:R}):null]})]})}function Pi(){return x(G,{children:[x("header",{class:"mb-2 flex items-center gap-2",children:[x("h1",{class:"text-3xl font-bold",children:"Commenstudio"}),x("nav",{children:[x("a",{href:"https://github.com/mybearworld/commenstudio",class:"font-bold text-sky-600 hover:underline",children:"Github"}),x("span",{class:"font-bold",children:" - "}),x("a",{href:"https://scratch.mit.edu/discuss/topic/717430",class:"font-bold text-sky-600 hover:underline",children:"Topic"})]})]}),x("div",{class:"flex max-w-full gap-8",children:[x("div",{class:"min-w-[theme(spacing.48)]",children:[x(vs,{}),x("div",{class:"mt-4 flex flex-col items-start",children:[x(Di,{}),x(Mi,{}),x(Ii,{})]})]}),x("div",{class:"flex-1",children:x(Ni,{})})]})]})}function Di(){const[t,e]=Q(Yn);return x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:()=>{confirm("Are you sure you want to reset your read date? Every comment will appear as unread if you do this.")&&e(0)},children:"Reset read date"})}function Mi(){const[t,e]=Q(Gn);return be(()=>{Notification.permission==="granted"&&e(!0)},[]),x(G,{children:t?null:x("button",{class:"font-bold text-sky-600 hover:underline",type:"button",onClick:async()=>{await Notification.requestPermission()==="granted"&&(console.log("cool"),e(!0))},children:"Enable notifications"})})}function Ii(){const[t,e]=Q(Xn),n=Ye(null);return x("label",{children:["Hide read comments:",x("input",{type:"checkbox",class:"ml-2",onClick:()=>{n.current&&e(n.current.checked)},checked:t,ref:n})]})}Re(x(Pi,{}),document.getElementById("app"));
